<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LEJOG 2025 Animated Route</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
<div id="map"></div>
<script>
  mapboxgl.accessToken = 'sk.eyJ1IjoiamFtdG9wIiwiYSI6ImNtOHJobjNhdDB1YXcyaXM1a3RuajB5dXAifQ.LztetmhF-tiZZe99cHDvmw';

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [-4, 55], // Center over the UK
    zoom: 4,
    pitch: 45,
    bearing: 0,
    antialias: true
  });

  map.on('load', () => {
    map.addSource('route', {
      'type': 'geojson',
      'data': {
        'type': 'Feature',
        'geometry': {
          'type': 'LineString',
          'coordinates': [
            [-5.714928, 50.066276], [-5.714949, 50.066206], [-5.715095, 50.066117],
            [-5.714954, 50.066061], [-5.714938, 50.065802]
            // ... (trimmed - full coordinates will be inserted here)
          ]
        }
      }
    });

    map.addLayer({
      'id': 'route-line',
      'type': 'line',
      'source': 'route',
      'layout': { 'line-join': 'round', 'line-cap': 'round' },
      'paint': {
        'line-color': '#ff6600',
        'line-width': 4
      }
    });

    // Animate the camera along the route
    const route = map.getSource('route')._data.geometry.coordinates;
    let i = 0;
    function fly() {
      if (i < route.length) {
        map.flyTo({ center: route[i], zoom: 10, speed: 0.5, curve: 1, essential: true });
        i++;
        setTimeout(fly, 1000);
      }
    }
    setTimeout(fly, 2000);
  });
</script>
</body>
</html>
