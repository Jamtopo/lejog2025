<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>LEJOG 2025 Animated Map</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css' />
  <script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #f4f4f4; }
    #map { width: 100%; height: 100%; }
    .leaflet-popup-content-wrapper { background: #ffffffdd; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    .leaflet-popup-tip { background: #ffffffdd; }
  </style>
</head>
<body>
<div id='map'></div>
<script>
  const map = L.map('map').setView([55, -4], 6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  const routeCoordinates = [
    [50.066276, -5.714928],
    [50.070972, -5.706553],
    [50.078012, -5.693338],
    [50.079942, -5.669559],
    [50.068988, -5.63781],
    [50.084095, -5.607227],
    [50.101251, -5.582992],
    [50.108963, -5.556877],
    [50.115796, -5.530868],
    [50.126891, -5.517754],
    [50.131124, -5.479437],
    [50.146244, -5.460278],
    [50.165209, -5.43659],
    [50.177598, -5.430848],
    [50.189575, -5.421573],
    [50.1924, -5.39376],
    [50.187564, -5.361343],
    [50.195008, -5.32238],
    [50.209565, -5.301954],
    [50.213853, -5.283463],
    [50.220293, -5.26849],
    [50.226976, -5.238734],
    [50.233, -5.226604],
    [50.248816, -5.208824],
    [50.261178, -5.190452],
    [50.285187, -5.160352],
    [50.313399, -5.124961],
    [50.318943, -5.097772],
    [50.330692, -5.071594],
    [50.353391, -5.065605],
    [50.375177, -5.042213],
    [50.382898, -5.000404],
    [50.405553, -4.954704],
    [50.410897, -4.926746],
    [50.406507, -4.899693],
    [50.417266, -4.837892],
    [50.437234, -4.78847],
    [50.465964, -4.741249],
    [50.473451, -4.727308],
    [50.486272, -4.745164],
    [50.51515, -4.707857],
    [50.536525, -4.706464],
    [50.5568, -4.690135],
    [50.568119, -4.669603],
    [50.582493, -4.677183],
    [50.595065, -4.663111],
    [50.626045, -4.627128],
    [50.646972, -4.591746],
    [50.664905, -4.573265],
    [50.676687, -4.528565],
    [50.662909, -4.502236],
    [50.652847, -4.447749],
    [50.639688, -4.431251],
    [50.63659, -4.387059],
    [50.638798, -4.353905],
    [50.6394, -4.322883],
    [50.643211, -4.284903],
    [50.632545, -4.250837],
    [50.616543, -4.214615],
    [50.616597, -4.150448],
    [50.636294, -4.111699],
    [50.662725, -4.09488],
    [50.690651, -4.07664],
    [50.713324, -4.033687],
    [50.731949, -4.002626],
    [50.744249, -3.998733],
    [50.769532, -3.980217],
    [50.790932, -3.936867],
    [50.799693, -3.897708],
    [50.800396, -3.846147],
    [50.801448, -3.797058],
    [50.804625, -3.755638],
    [50.8143, -3.736334],
    [50.818182, -3.6874],
    [50.830926, -3.666639],
    [50.838786, -3.640133],
    [50.862984, -3.634366],
    [50.86917, -3.605876],
    [50.871905, -3.572084],
    [50.883821, -3.543329],
    [50.893685, -3.51616],
    [50.902795, -3.489535],
    [50.904941, -3.473686],
    [50.915962, -3.438871],
    [50.928839, -3.399144],
    [50.936957, -3.374875],
    [50.955286, -3.34652],
    [50.967445, -3.319329],
    [50.978375, -3.30138],
    [50.991835, -3.298225],
    [50.995348, -3.273321],
    [51.000146, -3.237566],
    [51.004908, -3.205416],
    [51.01505, -3.196281],
    [51.018689, -3.169437],
    [51.015597, -3.148396],
    [51.016806, -3.128733],
    [51.015504, -3.112925],
    [51.0211, -3.098663],
    [51.029521, -3.075808],
    [51.027112, -3.027854],
    [51.045076, -2.99583],
    [51.06586, -2.988793],
    [51.082606, -2.976205],
    [51.109855, -2.981611],
    [51.112828, -2.973585],
    [51.127406, -2.951004],
    [51.136718, -2.930109],
    [51.160381, -2.924626],
    [51.15448, -2.892977],
    [51.143496, -2.859566],
    [51.154745, -2.834282],
    [51.185753, -2.803394],
    [51.205746, -2.744187],
    [51.227268, -2.698379],
    [51.241455, -2.688418],
    [51.264355, -2.691831],
    [51.305654, -2.653388],
    [51.324348, -2.640608],
    [51.346324, -2.622537],
    [51.36441, -2.609111],
    [51.372882, -2.597109],
    [51.385584, -2.577222],
    [51.401946, -2.552838],
    [51.416357, -2.555302],
    [51.430556, -2.560043],
    [51.433816, -2.555918],
    [51.445025, -2.559095],
    [51.448352, -2.577577],
    [51.449729, -2.593634],
    [51.455594, -2.599712],
    [51.468992, -2.608982],
    [51.481745, -2.624304],
    [51.494266, -2.618568],
    [51.507191, -2.626285],
    [51.522529, -2.61813],
    [51.536521, -2.620768],
    [51.543855, -2.639473],
    [51.551476, -2.652704],
    [51.568702, -2.653761],
    [51.571176, -2.637034],
    [51.586984, -2.634395],
    [51.603888, -2.623599],
    [51.639773, -2.688056],
    [51.669899, -2.701423],
    [51.687829, -2.719948],
    [51.706272, -2.719242],
    [51.735541, -2.724059],
    [51.763153, -2.724378],
    [51.789827, -2.716703],
    [51.807418, -2.719004],
    [51.824584, -2.745608],
    [51.841674, -2.766704],
    [51.867234, -2.781992],
    [51.88767, -2.790393],
    [51.903061, -2.812161],
    [51.921065, -2.845271],
    [51.936313, -2.823154],
    [51.958271, -2.826688],
    [51.969224, -2.807654],
    [51.98574, -2.775969],
    [52.005191, -2.744417],
    [52.02632, -2.73488],
    [52.045871, -2.72845],
    [52.062727, -2.719221],
    [52.062963, -2.699869],
    [52.09133, -2.688233],
    [52.124974, -2.672038],
    [52.152061, -2.667194],
    [52.185257, -2.667696],
    [52.203345, -2.697247],
    [52.221613, -2.727981],
    [52.233038, -2.742395],
    [52.250987, -2.770392],
    [52.277994, -2.776143],
    [52.292104, -2.757311],
    [52.322635, -2.741804],
    [52.343734, -2.730525],
    [52.365924, -2.724549],
    [52.375582, -2.748516],
    [52.389559, -2.761732],
    [52.40796, -2.80289],
    [52.44201, -2.798124],
    [52.463689, -2.801103],
    [52.477709, -2.771134],
    [52.500862, -2.752591],
    [52.528358, -2.725085],
    [52.552025, -2.719509],
    [52.578599, -2.708908],
    [52.60967, -2.693216],
    [52.629506, -2.674516],
    [52.656191, -2.672744],
    [52.677201, -2.684058],
    [52.705349, -2.659965],
    [52.742523, -2.66645],
    [52.777822, -2.653567],
    [52.792785, -2.656306],
    [52.818259, -2.637625],
    [52.845241, -2.609386],
    [52.863027, -2.60209],
    [52.888436, -2.612383],
    [52.916283, -2.643677],
    [52.952341, -2.669598],
    [52.968969, -2.678447],
    [52.986469, -2.679804],
    [53.004794, -2.666076],
    [53.019199, -2.67076],
    [53.036716, -2.693875],
    [53.068684, -2.718063],
    [53.091228, -2.745264],
    [53.106621, -2.727788],
    [53.127498, -2.763084],
    [53.148224, -2.756387],
    [53.163229, -2.806936],
    [53.17902, -2.829817],
    [53.194073, -2.870557],
    [53.20569, -2.869683],
    [53.221604, -2.828849],
    [53.238803, -2.809478],
    [53.26324, -2.775639],
    [53.278709, -2.754741],
    [53.295574, -2.726546],
    [53.305515, -2.697832],
    [53.3199, -2.705303],
    [53.328222, -2.709347],
    [53.340471, -2.735691],
    [53.358576, -2.734622],
    [53.375755, -2.733556],
    [53.397262, -2.735676],
    [53.419762, -2.725583],
    [53.441164, -2.729165],
    [53.451321, -2.739413],
    [53.452178, -2.72761],
    [53.455134, -2.718115],
    [53.464907, -2.699509],
    [53.484855, -2.675175],
    [53.501986, -2.658294],
    [53.516979, -2.65273],
    [53.52885, -2.655192],
    [53.538882, -2.652015],
    [53.542561, -2.644503],
    [53.550836, -2.633323],
    [53.572241, -2.639373],
    [53.583519, -2.634826],
    [53.611949, -2.607153],
    [53.635033, -2.611776],
    [53.651612, -2.613494],
    [53.673356, -2.619824],
    [53.687326, -2.639412],
    [53.700142, -2.65596],
    [53.713201, -2.659927],
    [53.722255, -2.663772],
    [53.731698, -2.680159],
    [53.75568, -2.702312],
    [53.765077, -2.695512],
    [53.783107, -2.687085],
    [53.798133, -2.691235],
    [53.802407, -2.716347],
    [53.813378, -2.727118],
    [53.844192, -2.742761],
    [53.868544, -2.75109],
    [53.889221, -2.767435],
    [53.902604, -2.774797],
    [53.921725, -2.768868],
    [53.93827, -2.757106],
    [53.950384, -2.770233],
    [53.972861, -2.771901],
    [53.992636, -2.788102],
    [54.00343, -2.785347],
    [54.013821, -2.790504],
    [54.027558, -2.793647],
    [54.042106, -2.795956],
    [54.050571, -2.802822],
    [54.060521, -2.807384],
    [54.08173, -2.814116],
    [54.094333, -2.801088],
    [54.107717, -2.788127],
    [54.124663, -2.772399],
    [54.135933, -2.771832],
    [54.152208, -2.761551],
    [54.172912, -2.7644],
    [54.18889, -2.768301],
    [54.211779, -2.781462],
    [54.226794, -2.775391],
    [54.240286, -2.755393],
    [54.260137, -2.738752],
    [54.27731, -2.745535],
    [54.29697, -2.739801],
    [54.319353, -2.739142],
    [54.329064, -2.744559],
    [54.344604, -2.750537],
    [54.359771, -2.771331],
    [54.368806, -2.806261],
    [54.378181, -2.831743],
    [54.380824, -2.874029],
    [54.3809, -2.90797],
    [54.395032, -2.921147],
    [54.410974, -2.948572],
    [54.422399, -2.966386],
    [54.432485, -2.972799],
    [54.44688, -2.983527],
    [54.450313, -3.013904],
    [54.46635, -3.021594],
    [54.497595, -3.041341],
    [54.512298, -3.052443],
    [54.529564, -3.060291],
    [54.552737, -3.074381],
    [54.565613, -3.059692],
    [54.590169, -3.055336],
    [54.618869, -3.054454],
    [54.633028, -3.019032],
    [54.652176, -2.991438],
    [54.665972, -2.987734],
    [54.682701, -2.998611],
    [54.706228, -3.010802],
    [54.737535, -3.018793],
    [54.750132, -3.008548],
    [54.784144, -2.977537],
    [54.814152, -2.976899],
    [54.841448, -2.984255],
    [54.861208, -2.948347],
    [54.878508, -2.946971],
    [54.894604, -2.942148],
    [54.905831, -2.942343],
    [54.916087, -2.968097],
    [54.945884, -3.004601],
    [54.979907, -3.023697],
    [54.995357, -3.066556],
    [54.991571, -3.107826],
    [55.016699, -3.133746],
    [55.037671, -3.177099],
    [55.05737, -3.251429],
    [55.074108, -3.304857],
    [55.103287, -3.342271],
    [55.141648, -3.36963],
    [55.208724, -3.412141],
    [55.276331, -3.424683],
    [55.315905, -3.461494],
    [55.373277, -3.515745],
    [55.408347, -3.56691],
    [55.429924, -3.622443],
    [55.456427, -3.643736],
    [55.473094, -3.693221],
    [55.504304, -3.693418],
    [55.524191, -3.784441],
    [55.572814, -3.814176],
    [55.605471, -3.80158],
    [55.63118, -3.76672],
    [55.645904, -3.734892],
    [55.671979, -3.720106],
    [55.698089, -3.689738],
    [55.728804, -3.683666],
    [55.74529, -3.641214],
    [55.778193, -3.591846],
    [55.825742, -3.576987],
    [55.856601, -3.534725],
    [55.871813, -3.531535],
    [55.879844, -3.528274],
    [55.888355, -3.52872],
    [55.897754, -3.524421],
    [55.907108, -3.496644],
    [55.921821, -3.500979],
    [55.931762, -3.477646],
    [55.951067, -3.448469],
    [55.960205, -3.410865],
    [55.983958, -3.396361],
    [55.988048, -3.404237],
    [56.034109, -3.39657],
    [56.046553, -3.407255],
    [56.06207, -3.414627],
    [56.075233, -3.419584],
    [56.087099, -3.442351],
    [56.115839, -3.445126],
    [56.136415, -3.444316],
    [56.159742, -3.453731],
    [56.183764, -3.436224],
    [56.203793, -3.421033],
    [56.223346, -3.42321],
    [56.249828, -3.389628],
    [56.283894, -3.396784],
    [56.313622, -3.374475],
    [56.344756, -3.403269],
    [56.365746, -3.428012],
    [56.385324, -3.426776],
    [56.416234, -3.442058],
    [56.436662, -3.471908],
    [56.456542, -3.471444],
    [56.488568, -3.502947],
    [56.511094, -3.523069],
    [56.53328, -3.54205],
    [56.555201, -3.572823],
    [56.565037, -3.58539],
    [56.572822, -3.616246],
    [56.605012, -3.626126],
    [56.637092, -3.646472],
    [56.651267, -3.678661],
    [56.671676, -3.693199],
    [56.690044, -3.720838],
    [56.702243, -3.730591],
    [56.70878, -3.755748],
    [56.735429, -3.770878],
    [56.760076, -3.820307],
    [56.76988, -3.891728],
    [56.768077, -3.952452],
    [56.779311, -3.997711],
    [56.800939, -4.042595],
    [56.81092, -4.117753],
    [56.818882, -4.183268],
    [56.831572, -4.221997],
    [56.859524, -4.249018],
    [56.898235, -4.244617],
    [56.931296, -4.242441],
    [56.960631, -4.216887],
    [57.002037, -4.173044],
    [57.042077, -4.149206],
    [57.063611, -4.123363],
    [57.073494, -4.089935],
    [57.076365, -4.050834],
    [57.073047, -4.021136],
    [57.084317, -3.976115],
    [57.098613, -3.946986],
    [57.11689, -3.914343],
    [57.125554, -3.891921],
    [57.148587, -3.852024],
    [57.168911, -3.826274],
    [57.187382, -3.829422],
    [57.199797, -3.828469],
    [57.234694, -3.80706],
    [57.269691, -3.809426],
    [57.289063, -3.83802],
    [57.29013, -3.91086],
    [57.3122, -3.954561],
    [57.338565, -3.993631],
    [57.357382, -4.005469],
    [57.381168, -4.048349],
    [57.410741, -4.076203],
    [57.425029, -4.119211],
    [57.433648, -4.131489],
    [57.469822, -4.176483],
    [57.473209, -4.200027],
    [57.478384, -4.226179],
    [57.487091, -4.228772],
    [57.502022, -4.244668],
    [57.51552, -4.28894],
    [57.540697, -4.332887],
    [57.551305, -4.405009],
    [57.578164, -4.435276],
    [57.594727, -4.431176],
    [57.614631, -4.410566],
    [57.648616, -4.351544],
    [57.666596, -4.328119],
    [57.678682, -4.304124],
    [57.693798, -4.267576],
    [57.71009, -4.26806],
    [57.740793, -4.266559],
    [57.769429, -4.247498],
    [57.805318, -4.250991],
    [57.845517, -4.292304],
    [57.861662, -4.317406],
    [57.885807, -4.374484],
    [57.902697, -4.386593],
    [57.925019, -4.400785],
    [57.951139, -4.405254],
    [57.976607, -4.415112],
    [58.012238, -4.403292],
    [58.030368, -4.412118],
    [58.085628, -4.417427],
    [58.143786, -4.469948],
    [58.193115, -4.514569],
    [58.225604, -4.492433],
    [58.263237, -4.452025],
    [58.285687, -4.444302],
    [58.326259, -4.430911],
    [58.356256, -4.410315],
    [58.386515, -4.363063],
    [58.41458, -4.374197],
    [58.441093, -4.383145],
    [58.488259, -4.412412],
    [58.50584, -4.378443],
    [58.503076, -4.335351],
    [58.493305, -4.270739],
    [58.487259, -4.212952],
    [58.511129, -4.215062],
    [58.529179, -4.198239],
    [58.528265, -4.149134],
    [58.540184, -4.113413],
    [58.544568, -4.084646],
    [58.556778, -4.028074],
    [58.559106, -3.980535],
    [58.551831, -3.916089],
    [58.552923, -3.87402],
    [58.556343, -3.812463],
    [58.561435, -3.759832],
    [58.551609, -3.628388],
    [58.573349, -3.559041],
    [58.591666, -3.516993],
    [58.570482, -3.454226],
    [58.59075, -3.394796],
    [58.591586, -3.36074],
    [58.636122, -3.197701],
    [58.642043, -3.092854]
  ];
  const polyline = L.polyline(routeCoordinates, { color: 'blue' }).addTo(map);
  map.fitBounds(polyline.getBounds());

  const marker = L.marker(routeCoordinates[0]).addTo(map);
  let i = 0;
  const stopMarkers = [
    { label: "Lands End", coord: [50.066276, -5.714928] },
    { label: "Bodmin", coord: [50.5568, -4.690135] },
    { label: "Coleford", coord: [50.940276, -3.364768] },
    { label: "Bristol", coord: [51.432586, -2.749924] },
    { label: "Ludlow", coord: [52.061906, -2.711933] },
    { label: "St Helens", coord: [53.046035, -2.697682] },
    { label: "Kendal", coord: [53.707341, -2.656168] },
    { label: "Lockerbie", coord: [54.365092, -2.782022] },
    { label: "South Queensferry", coord: [55.121814, -3.355403] },
    { label: "Pitlochry", coord: [56.168359, -3.446973] },
    { label: "Inverness", coord: [57.077482, -4.064444] },
    { label: "Altnaharra", coord: [57.876165, -4.357548] },
    { label: "John O’Groats", coord: [58.641291, -3.078168] }
  ];
  const placedStops = new Set();

  setTimeout(() => {
    map.flyTo(routeCoordinates[0], 10, { animate: true, duration: 2 });
    setTimeout(animateMarker, 1000);
  }, 300);

  function animateMarker() {
    if (i < routeCoordinates.length) {
      const point = routeCoordinates[i];
      marker.setLatLng(point);
      map.panTo(point, { animate: true, duration: 0.1 });
      stopMarkers.forEach(stop => {
        if (!placedStops.has(stop.label) &&
            Math.abs(stop.coord[0] - point[0]) < 0.01 &&
            Math.abs(stop.coord[1] - point[1]) < 0.01) {
          L.marker(stop.coord).addTo(map)
            .bindPopup(stop.label).openPopup();
          placedStops.add(stop.label);
        }
      });
      i++;
      setTimeout(animateMarker, 50);
    } else {
      const bounds = L.latLngBounds(routeCoordinates);
      map.flyToBounds(bounds, {
        padding: [50, 50],
        animate: true,
        duration: 3
      });
    }
  }
</script>
</body>
</html>
