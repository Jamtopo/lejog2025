<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>LEJOG 2025 Animated Map</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css' />
  <script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #f4f4f4; }
    #map { width: 100%; height: 100%; }
    .leaflet-popup-content-wrapper { background: #ffffffdd; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    .leaflet-popup-tip { background: #ffffffdd; }
  </style>
</head>
<body>
<div id='map'></div>
<script>
  const map = L.map('map').setView([55, -4], 6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  const routeCoordinates = [
    [50.066276, -5.714928],
    [50.071734, -5.705512],
    [50.077, -5.684046],
    [50.070448, -5.642705],
    [50.08413, -5.607409],
    [50.104605, -5.576853],
    [50.111187, -5.544018],
    [50.124012, -5.529904],
    [50.130464, -5.479654],
    [50.151232, -5.457297],
    [50.169101, -5.429017],
    [50.187938, -5.422697],
    [50.191674, -5.396825],
    [50.18775, -5.353571],
    [50.200542, -5.313602],
    [50.212048, -5.287442],
    [50.219691, -5.270298],
    [50.227664, -5.236529],
    [50.2387, -5.21792],
    [50.257046, -5.197056],
    [50.279909, -5.16326],
    [50.315509, -5.120666],
    [50.3209, -5.081423],
    [50.340918, -5.063263],
    [50.373254, -5.048554],
    [50.387686, -4.990529],
    [50.409365, -4.946621],
    [50.408363, -4.909863],
    [50.415664, -4.848653],
    [50.445783, -4.77314],
    [50.469749, -4.731051],
    [50.477787, -4.749747],
    [50.513748, -4.719025],
    [50.537556, -4.705165],
    [50.560742, -4.689757],
    [50.575051, -4.677415],
    [50.593565, -4.664374],
    [50.629275, -4.624489],
    [50.652448, -4.58598],
    [50.681553, -4.546847],
    [50.663341, -4.508951],
    [50.652269, -4.449472],
    [50.638708, -4.419046],
    [50.640383, -4.364332],
    [50.640489, -4.327107],
    [50.643147, -4.283638],
    [50.627769, -4.241707],
    [50.617001, -4.17916],
    [50.630688, -4.117819],
    [50.664153, -4.093987],
    [50.698888, -4.067556],
    [50.724841, -4.015331],
    [50.741979, -4.00158],
    [50.769663, -3.980152],
    [50.793233, -3.922566],
    [50.803727, -3.882183],
    [50.831106, -3.839748],
    [50.851142, -3.796644],
    [50.856417, -3.756183],
    [50.868441, -3.717451],
    [50.883148, -3.658993],
    [50.889434, -3.613421],
    [50.897806, -3.567996],
    [50.905846, -3.536569],
    [50.902854, -3.489891],
    [50.906628, -3.466919],
    [50.921816, -3.417826],
    [50.934073, -3.381572],
    [50.954286, -3.347196],
    [50.969795, -3.313473],
    [50.985345, -3.304455],
    [50.992712, -3.280337],
    [50.999949, -3.23884],
    [51.006768, -3.205536],
    [51.015868, -3.187821],
    [51.018382, -3.153271],
    [51.016565, -3.129912],
    [51.015622, -3.108869],
    [51.022262, -3.092278],
    [51.025102, -3.041649],
    [51.044842, -2.998112],
    [51.068316, -2.993695],
    [51.092537, -2.972399],
    [51.11744, -2.993556],
    [51.136976, -2.999719],
    [51.158882, -2.986758],
    [51.190647, -2.998302],
    [51.219382, -2.977127],
    [51.240087, -2.999062],
    [51.261127, -3.007447],
    [51.293078, -2.994225],
    [51.311769, -2.981291],
    [51.327807, -2.977175],
    [51.33855, -2.959128],
    [51.353699, -2.936975],
    [51.359543, -2.902997],
    [51.373772, -2.89295],
    [51.392097, -2.881769],
    [51.401149, -2.842011],
    [51.417946, -2.79837],
    [51.43055, -2.776614],
    [51.433195, -2.752616],
    [51.424367, -2.716432],
    [51.425593, -2.674412],
    [51.42923, -2.654021],
    [51.440943, -2.635984],
    [51.446227, -2.61559],
    [51.454347, -2.597993],
    [51.468563, -2.608744],
    [51.486301, -2.62466],
    [51.500732, -2.624608],
    [51.519488, -2.621664],
    [51.535151, -2.618894],
    [51.54441, -2.641511],
    [51.559824, -2.657252],
    [51.569326, -2.641472],
    [51.584766, -2.636737],
    [51.613656, -2.649668],
    [51.648792, -2.690807],
    [51.682764, -2.72118],
    [51.704653, -2.717009],
    [51.741759, -2.723989],
    [51.776245, -2.7287],
    [51.803971, -2.714967],
    [51.823084, -2.741529],
    [51.844114, -2.768699],
    [51.878104, -2.783216],
    [51.898706, -2.797482],
    [51.919679, -2.84554],
    [51.9406, -2.82086],
    [51.963419, -2.819323],
    [51.976917, -2.785087],
    [52.001802, -2.74855],
    [52.028513, -2.736984],
    [52.055851, -2.72558],
    [52.060612, -2.708476],
    [52.085055, -2.690504],
    [52.129412, -2.672259],
    [52.159259, -2.670215],
    [52.193606, -2.680847],
    [52.222839, -2.72113],
    [52.234109, -2.743782],
    [52.258173, -2.773129],
    [52.283758, -2.766093],
    [52.317403, -2.742434],
    [52.34395, -2.728706],
    [52.370209, -2.721618],
    [52.404859, -2.729151],
    [52.44218, -2.718532],
    [52.465224, -2.691336],
    [52.487425, -2.672752],
    [52.512702, -2.672907],
    [52.542354, -2.68474],
    [52.588574, -2.661483],
    [52.617476, -2.663702],
    [52.643774, -2.668734],
    [52.672076, -2.684235],
    [52.707461, -2.658665],
    [52.763043, -2.678227],
    [52.786878, -2.655515],
    [52.813116, -2.640211],
    [52.845416, -2.609169],
    [52.870994, -2.600642],
    [52.898855, -2.628131],
    [52.943898, -2.66265],
    [52.969069, -2.678486],
    [52.991643, -2.679167],
    [53.011385, -2.662605],
    [53.034309, -2.688004],
    [53.068684, -2.718063],
    [53.096271, -2.741503],
    [53.12055, -2.754604],
    [53.147523, -2.749472],
    [53.163141, -2.806934],
    [53.182177, -2.840022],
    [53.196033, -2.869191],
    [53.21819, -2.829717],
    [53.238512, -2.81153],
    [53.265835, -2.770891],
    [53.286201, -2.736832],
    [53.30056, -2.707369],
    [53.319598, -2.705502],
    [53.33038, -2.708971],
    [53.351869, -2.737123],
    [53.370227, -2.732794],
    [53.394585, -2.735382],
    [53.421768, -2.726218],
    [53.443731, -2.730466],
    [53.451345, -2.731729],
    [53.454611, -2.719268],
    [53.470401, -2.693465],
    [53.494867, -2.666934],
    [53.512298, -2.651341],
    [53.52832, -2.655022],
    [53.539251, -2.651555],
    [53.546254, -2.641078],
    [53.564184, -2.632113],
    [53.583853, -2.637739],
    [53.61461, -2.60929],
    [53.640667, -2.613729],
    [53.664959, -2.617638],
    [53.685696, -2.638451],
    [53.700532, -2.654528],
    [53.71577, -2.666781],
    [53.728253, -2.673606],
    [53.75338, -2.702101],
    [53.766178, -2.695824],
    [53.786495, -2.682633],
    [53.802531, -2.707646],
    [53.811239, -2.724656],
    [53.847506, -2.744773],
    [53.874971, -2.759603],
    [53.898504, -2.773693],
    [53.918465, -2.771819],
    [53.940546, -2.752433],
    [53.95461, -2.770965],
    [53.986745, -2.775979],
    [54.00128, -2.785963],
    [54.01463, -2.790916],
    [54.031145, -2.794238],
    [54.045742, -2.800237],
    [54.056675, -2.808581],
    [54.081839, -2.814173],
    [54.096508, -2.799252],
    [54.114966, -2.788288],
    [54.13271, -2.770466],
    [54.152208, -2.761551],
    [54.178017, -2.768609],
    [54.205912, -2.776144],
    [54.225701, -2.780268],
    [54.240192, -2.755802],
    [54.263145, -2.737971],
    [54.29525, -2.739071],
    [54.319418, -2.739153],
    [54.330388, -2.747282],
    [54.346208, -2.753141],
    [54.364674, -2.780537],
    [54.377668, -2.820178],
    [54.381666, -2.867995],
    [54.381299, -2.910862],
    [54.40077, -2.937907],
    [54.419758, -2.96146],
    [54.431957, -2.971349],
    [54.447973, -2.986359],
    [54.454858, -3.017227],
    [54.483379, -3.031192],
    [54.509305, -3.051778],
    [54.529733, -3.063037],
    [54.560095, -3.074243],
    [54.579335, -3.058831],
    [54.61645, -3.053996],
    [54.63462, -3.013517],
    [54.658369, -2.987291],
    [54.676461, -2.996489],
    [54.702651, -3.008694],
    [54.738327, -3.020744],
    [54.75433, -2.981925],
    [54.801243, -2.967606],
    [54.838473, -2.981526],
    [54.861135, -2.947878],
    [54.881137, -2.941489],
    [54.898537, -2.935839],
    [54.916187, -2.963449],
    [54.94623, -3.005205],
    [54.989479, -3.04617],
    [54.989108, -3.077107],
    [55.01241, -3.126185],
    [55.037716, -3.176909],
    [55.058102, -3.259892],
    [55.096018, -3.330137],
    [55.126369, -3.351961],
    [55.145486, -3.377295],
    [55.225423, -3.415288],
    [55.310898, -3.450701],
    [55.36134, -3.516707],
    [55.409047, -3.570336],
    [55.436695, -3.64558],
    [55.467252, -3.667537],
    [55.500163, -3.690656],
    [55.525417, -3.791445],
    [55.577843, -3.811408],
    [55.623858, -3.787325],
    [55.641623, -3.743684],
    [55.6728, -3.720145],
    [55.702945, -3.685823],
    [55.73275, -3.657789],
    [55.768973, -3.602939],
    [55.826945, -3.575219],
    [55.862279, -3.531045],
    [55.875539, -3.527054],
    [55.888198, -3.526504],
    [55.897754, -3.524421],
    [55.910007, -3.496147],
    [55.927371, -3.493671],
    [55.94445, -3.45422],
    [55.960277, -3.411251],
    [55.988758, -3.39727],
    [56.022399, -3.405211],
    [56.044059, -3.396269],
    [56.060527, -3.415392],
    [56.078227, -3.422886],
    [56.103086, -3.451634],
    [56.129063, -3.440373],
    [56.158425, -3.460664],
    [56.192319, -3.433634],
    [56.209551, -3.424354],
    [56.238139, -3.404066],
    [56.281759, -3.397467],
    [56.315858, -3.371216],
    [56.350989, -3.407289],
    [56.376983, -3.4285],
    [56.411255, -3.4348],
    [56.439718, -3.46851],
    [56.472418, -3.485107],
    [56.505005, -3.520536],
    [56.528346, -3.543084],
    [56.556696, -3.577327],
    [56.570884, -3.592749],
    [56.594722, -3.621959],
    [56.631828, -3.640444],
    [56.654674, -3.680139],
    [56.67851, -3.708035],
    [56.699478, -3.732193],
    [56.708588, -3.751082],
    [56.738558, -3.769869],
    [56.766708, -3.836303],
    [56.769764, -3.930261],
    [56.776665, -3.989517],
    [56.802994, -4.065748],
    [56.815662, -4.131589],
    [56.825144, -4.203917],
    [56.856, -4.246937],
    [56.901928, -4.24092],
    [56.941286, -4.235602],
    [56.988187, -4.183236],
    [57.033521, -4.156847],
    [57.064122, -4.122275],
    [57.076494, -4.070548],
    [57.071866, -4.038054],
    [57.080551, -3.984095],
    [57.100452, -3.946715],
    [57.117528, -3.903584],
    [57.140618, -3.86992],
    [57.167154, -3.832464],
    [57.187842, -3.829473],
    [57.206694, -3.82599],
    [57.255259, -3.805244],
    [57.284576, -3.815802],
    [57.29013, -3.91086],
    [57.323024, -3.980472],
    [57.346509, -4.005126],
    [57.371727, -4.027209],
    [57.410533, -4.075775],
    [57.421295, -4.127383],
    [57.461973, -4.16905],
    [57.472876, -4.196656],
    [57.478789, -4.224933],
    [57.489783, -4.232709],
    [57.508212, -4.264407],
    [57.532501, -4.32154],
    [57.550734, -4.399924],
    [57.581089, -4.436073],
    [57.602246, -4.429335],
    [57.635034, -4.373039],
    [57.666545, -4.329207],
    [57.680277, -4.300236],
    [57.700071, -4.256805],
    [57.728036, -4.283363],
    [57.769093, -4.252184],
    [57.818884, -4.256527],
    [57.851744, -4.299197],
    [57.880433, -4.362225],
    [57.900231, -4.382012],
    [57.927991, -4.400488],
    [57.958322, -4.408749],
    [57.997107, -4.409737],
    [58.028315, -4.406792],
    [58.089768, -4.419404],
    [58.163168, -4.49606],
    [58.213416, -4.497382],
    [58.258631, -4.458895],
    [58.281914, -4.442468],
    [58.326663, -4.430752],
    [58.363874, -4.396956],
    [58.398947, -4.36703],
    [58.432205, -4.388395],
    [58.488259, -4.412412],
    [58.50027, -4.367192],
    [58.495173, -4.300771],
    [58.484392, -4.235655],
    [58.511076, -4.215005],
    [58.529952, -4.184564],
    [58.533293, -4.132592],
    [58.542902, -4.09429],
    [58.556338, -4.030322],
    [58.562039, -3.959178],
    [58.542103, -3.897857],
    [58.555164, -3.835706],
    [58.561117, -3.761079],
    [58.553961, -3.625944],
    [58.588, -3.532654],
    [58.584606, -3.485692],
    [58.590946, -3.396002],
    [58.589247, -3.350587],
    [58.627825, -3.135901],
  ];
  const polyline = L.polyline(routeCoordinates, { color: 'blue' }).addTo(map);
  map.fitBounds(polyline.getBounds());

  const marker = L.marker(routeCoordinates[0]).addTo(map);
  let i = 0;
  const stopMarkers = [
    { label: 'Lands End', coord: [50.066276, -5.714928] },
    { label: 'Bodmin', coord: [50.560742, -4.689757] },
    { label: 'Coleford', coord: [50.934073, -3.381572] },
    { label: 'Bristol', coord: [51.433195, -2.752616] },
    { label: 'Ludlow', coord: [52.060612, -2.708476] },
    { label: 'St Helens', coord: [53.034309, -2.688004] },
    { label: 'Kendal', coord: [53.700532, -2.654528] },
    { label: 'Lockerbie', coord: [54.364674, -2.780537] },
    { label: 'South Queensferry', coord: [55.126369, -3.351961] },
    { label: 'Pitlochry', coord: [56.158425, -3.460664] },
    { label: 'Inverness', coord: [57.076494, -4.070548] },
    { label: 'Altnaharra', coord: [57.880433, -4.362225] },
    { label: 'John O’Groats', coord: [58.627825, -3.135901] },
  ];
  const placedStops = new Set();
  setTimeout(() => {
    map.flyTo(routeCoordinates[0], 10, { animate: true, duration: 2 });
    setTimeout(animateMarker, 2000);
  }, 500);

  function animateMarker() {
    if (i < routeCoordinates.length) {
      const point = routeCoordinates[i];
      marker.setLatLng(point);
      map.panTo(point, { animate: true, duration: 1 });
      stopMarkers.forEach(stop => {
        if (!placedStops.has(stop.label) &&
            Math.abs(stop.coord[0] - point[0]) < 0.0005 &&
            Math.abs(stop.coord[1] - point[1]) < 0.0005) {
          L.marker(stop.coord).addTo(map)
            .bindPopup(stop.label).openPopup();
          placedStops.add(stop.label);
        }
      });
      i++;
      setTimeout(animateMarker, 150);
    }
  }
</script>
</body>
</html>
