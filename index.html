<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>LEJOG 2025 Animated Map</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link rel='stylesheet' href='https://unpkg.com/leaflet@1.9.4/dist/leaflet.css' />
  <script src='https://unpkg.com/leaflet@1.9.4/dist/leaflet.js'></script>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: #f4f4f4; }
    #map { width: 100%; height: 100%; }
    .leaflet-popup-content-wrapper { background: #ffffffdd; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    .leaflet-popup-tip { background: #ffffffdd; }
  </style>
</head>
<body>
<div id='map'></div>
<script>
  const map = L.map('map').setView([55, -4], 6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  const routeCoordinates = [
    [50.066276, -5.714928],
    [50.070972, -5.706553],
    [50.078012, -5.693338],
    [50.079942, -5.669559],
    [50.068988, -5.63781],
    [50.084095, -5.607227],
    [50.101251, -5.582992],
    [50.108963, -5.556877],
    [50.115796, -5.530868],
    [50.126891, -5.517754],
    [50.131124, -5.479437],
    [50.146244, -5.460278],
    [50.165209, -5.43659],
    [50.177598, -5.430848],
    [50.189575, -5.421573],
    [50.1924, -5.39376],
    [50.187564, -5.361343],
    [50.195008, -5.32238],
    [50.209565, -5.301954],
    [50.213853, -5.283463],
    [50.220293, -5.26849],
    [50.226976, -5.238734],
    [50.233, -5.226604],
    [50.248816, -5.208824],
    [50.261178, -5.190452],
    [50.285187, -5.160352],
    [50.313399, -5.124961],
    [50.318943, -5.097772],
    [50.330692, -5.071594],
    [50.353391, -5.065605],
    [50.375177, -5.042213],
    [50.382898, -5.000404],
    [50.405553, -4.954704],
    [50.410897, -4.926746],
    [50.406507, -4.899693],
    [50.417266, -4.837892],
    [50.437234, -4.78847],
    [50.465964, -4.741249],
    [50.473451, -4.727308],
    [50.486272, -4.745164],
    [50.51515, -4.707857],
    [50.536525, -4.706464],
    [50.5568, -4.690135],
    [50.568119, -4.669603],
    [50.582493, -4.677183],
    [50.595065, -4.663111],
    [50.626045, -4.627128],
    [50.646972, -4.591746],
    [50.664905, -4.573265],
    [50.676687, -4.528565],
    [50.662909, -4.502236],
    [50.652847, -4.447749],
    [50.639688, -4.431251],
    [50.63659, -4.387059],
    [50.638798, -4.353905],
    [50.6394, -4.322883],
    [50.643211, -4.284903],
    [50.632545, -4.250837],
    [50.616543, -4.214615],
    [50.616597, -4.150448],
    [50.636294, -4.111699],
    [50.662725, -4.09488],
    [50.690651, -4.07664],
    [50.713324, -4.033687],
    [50.731949, -4.002626],
    [50.744249, -3.998733],
    [50.769532, -3.980217],
    [50.790932, -3.936867],
    [50.799864, -3.897604],
    [50.822179, -3.864427],
    [50.836377, -3.83159],
    [50.851142, -3.796644],
    [50.856141, -3.768799],
    [50.862186, -3.734013],
    [50.875492, -3.695213],
    [50.883882, -3.650546],
    [50.889524, -3.612741],
    [50.896652, -3.574017],
    [50.900105, -3.551644],
    [50.904828, -3.505268],
    [50.904981, -3.486176],
    [50.906846, -3.465672],
    [50.919949, -3.430924],
    [50.931238, -3.390968],
    [50.940276, -3.364768],
    [50.960421, -3.343453],
    [50.970008, -3.31295],
    [50.984448, -3.299957],
    [50.991468, -3.290538],
    [50.998409, -3.267475],
    [50.998046, -3.229234],
    [51.00805, -3.207215],
    [51.015613, -3.189525],
    [51.016942, -3.164132],
    [51.015822, -3.140792],
    [51.016924, -3.122326],
    [51.015383, -3.107375],
    [51.021756, -3.096452],
    [51.028651, -3.064486],
    [51.030571, -3.016764],
    [51.0495, -2.992985],
    [51.071567, -2.994855],
    [51.089041, -2.970218],
    [51.112408, -2.987971],
    [51.129423, -3.000956],
    [51.142342, -2.9921],
    [51.162313, -2.987491],
    [51.18558, -3.002361],
    [51.216093, -2.98203],
    [51.227261, -2.989172],
    [51.246534, -2.998524],
    [51.263022, -3.006457],
    [51.292189, -2.99488],
    [51.306476, -2.985501],
    [51.321113, -2.985013],
    [51.329732, -2.966998],
    [51.339379, -2.958339],
    [51.352668, -2.939988],
    [51.360272, -2.909165],
    [51.365555, -2.897227],
    [51.381067, -2.89104],
    [51.394573, -2.874602],
    [51.400999, -2.84316],
    [51.423336, -2.816973],
    [51.424019, -2.791462],
    [51.431776, -2.767298],
    [51.432586, -2.749924],
    [51.424225, -2.719372],
    [51.423753, -2.69135],
    [51.427626, -2.6631],
    [51.430228, -2.648018],
    [51.444316, -2.633407],
    [51.446026, -2.616927],
    [51.453425, -2.597509],
    [51.4592, -2.604042],
    [51.473008, -2.613284],
    [51.488756, -2.623306],
    [51.500579, -2.624524],
    [51.513258, -2.627718],
    [51.52686, -2.613456],
    [51.543296, -2.6361],
    [51.54478, -2.644605],
    [51.559824, -2.657252],
    [51.569488, -2.647533],
    [51.576168, -2.635541],
    [51.597764, -2.630156],
    [51.621597, -2.672497],
    [51.65022, -2.691745],
    [51.677782, -2.714993],
    [51.698207, -2.716778],
    [51.721309, -2.726249],
    [51.746324, -2.724384],
    [51.777668, -2.727952],
    [51.801639, -2.713668],
    [51.816031, -2.728851],
    [51.832239, -2.75496],
    [51.850191, -2.771586],
    [51.877871, -2.786873],
    [51.896491, -2.793786],
    [51.912667, -2.834052],
    [51.930861, -2.841485],
    [51.945292, -2.831632],
    [51.964008, -2.818817],
    [51.975372, -2.795621],
    [51.993493, -2.768704],
    [52.01386, -2.73625],
    [52.032689, -2.735395],
    [52.055993, -2.724829],
    [52.061906, -2.711933],
    [52.073313, -2.694855],
    [52.106513, -2.683389],
    [52.137686, -2.668669],
    [52.162351, -2.672465],
    [52.190977, -2.674433],
    [52.210413, -2.70746],
    [52.226053, -2.738975],
    [52.242167, -2.756671],
    [52.260573, -2.773465],
    [52.281976, -2.768907],
    [52.305391, -2.749991],
    [52.333239, -2.742176],
    [52.36196, -2.718384],
    [52.371893, -2.720745],
    [52.396465, -2.723322],
    [52.434236, -2.728734],
    [52.451875, -2.703033],
    [52.47039, -2.675754],
    [52.494464, -2.669201],
    [52.511205, -2.669498],
    [52.538318, -2.67799],
    [52.569001, -2.661866],
    [52.597225, -2.653947],
    [52.623422, -2.659934],
    [52.64266, -2.668314],
    [52.664065, -2.685299],
    [52.69382, -2.675398],
    [52.717851, -2.665987],
    [52.763034, -2.661188],
    [52.786307, -2.655425],
    [52.809194, -2.65046],
    [52.831118, -2.645281],
    [52.856811, -2.607257],
    [52.877019, -2.609128],
    [52.89809, -2.626816],
    [52.936973, -2.660294],
    [52.959415, -2.675638],
    [52.975176, -2.677981],
    [52.993795, -2.672892],
    [53.011233, -2.662283],
    [53.031588, -2.6787],
    [53.046035, -2.697682],
    [53.073344, -2.732205],
    [53.097594, -2.7378],
    [53.12055, -2.754604],
    [53.141485, -2.753831],
    [53.150266, -2.778659],
    [53.170426, -2.817214],
    [53.186474, -2.845966],
    [53.196322, -2.86886],
    [53.214402, -2.832288],
    [53.229548, -2.826208],
    [53.252496, -2.790208],
    [53.271777, -2.767399],
    [53.286759, -2.73576],
    [53.298772, -2.714511],
    [53.314602, -2.692203],
    [53.326032, -2.70421],
    [53.337836, -2.727483],
    [53.352953, -2.737322],
    [53.365024, -2.733487],
    [53.386083, -2.736889],
    [53.412651, -2.727529],
    [53.428697, -2.72501],
    [53.445014, -2.731526],
    [53.451032, -2.732102],
    [53.453091, -2.722938],
    [53.460237, -2.707597],
    [53.473389, -2.687742],
    [53.495579, -2.665833],
    [53.509562, -2.651272],
    [53.523095, -2.653438],
    [53.533391, -2.654827],
    [53.540628, -2.649634],
    [53.547618, -2.639835],
    [53.562343, -2.631808],
    [53.577387, -2.637316],
    [53.598198, -2.612876],
    [53.619884, -2.612179],
    [53.643499, -2.612847],
    [53.663287, -2.615057],
    [53.68367, -2.628107],
    [53.693281, -2.650002],
    [53.707341, -2.656168],
    [53.719239, -2.666118],
    [53.726307, -2.672767],
    [53.743094, -2.698542],
    [53.761173, -2.701197],
    [53.774849, -2.696381],
    [53.788708, -2.682101],
    [53.802574, -2.706314],
    [53.805791, -2.721711],
    [53.827897, -2.736893],
    [53.85821, -2.74409],
    [53.878238, -2.761865],
    [53.897982, -2.772271],
    [53.911656, -2.773642],
    [53.930327, -2.76062],
    [53.947445, -2.758547],
    [53.95862, -2.770885],
    [53.985809, -2.775081],
    [53.998211, -2.785114],
    [54.009349, -2.788456],
    [54.019693, -2.793969],
    [54.033883, -2.794933],
    [54.045545, -2.799998],
    [54.055801, -2.807705],
    [54.067166, -2.808225],
    [54.090507, -2.812354],
    [54.099825, -2.795464],
    [54.11478, -2.788403],
    [54.128962, -2.770431],
    [54.143501, -2.768649],
    [54.163314, -2.7619],
    [54.178106, -2.776738],
    [54.205912, -2.776144],
    [54.223569, -2.782968],
    [54.232578, -2.766204],
    [54.248686, -2.749283],
    [54.270246, -2.735902],
    [54.295409, -2.73911],
    [54.31412, -2.73769],
    [54.328201, -2.7425],
    [54.33191, -2.749086],
    [54.349987, -2.758562],
    [54.365092, -2.782022],
    [54.376819, -2.816218],
    [54.380391, -2.849703],
    [54.381074, -2.89306],
    [54.385319, -2.913662],
    [54.401186, -2.939123],
    [54.416044, -2.959093],
    [54.426599, -2.969362],
    [54.437864, -2.982995],
    [54.449432, -2.999325],
    [54.455028, -3.017431],
    [54.477247, -3.027704],
    [54.503855, -3.045689],
    [54.517878, -3.057278],
    [54.537007, -3.071354],
    [54.560605, -3.072824],
    [54.575126, -3.055033],
    [54.60315, -3.059926],
    [54.622129, -3.045787],
    [54.637672, -2.998936],
    [54.659591, -2.986177],
    [54.67516, -2.994529],
    [54.696268, -3.004457],
    [54.716212, -3.014827],
    [54.740298, -3.020633],
    [54.761257, -2.976835],
    [54.799813, -2.97222],
    [54.829789, -2.981129],
    [54.847212, -2.976454],
    [54.867596, -2.944215],
    [54.882173, -2.939563],
    [54.897653, -2.938313],
    [54.909676, -2.954437],
    [54.933221, -2.990403],
    [54.954863, -3.014059],
    [54.991894, -3.051369],
    [54.989922, -3.074628],
    [55.001016, -3.110215],
    [55.022126, -3.163086],
    [55.046956, -3.203389],
    [55.059051, -3.265647],
    [55.094603, -3.326158],
    [55.121814, -3.355403],
    [55.133418, -3.362494],
    [55.181313, -3.404724],
    [55.242925, -3.410139],
    [55.309919, -3.449884],
    [55.342356, -3.498402],
    [55.397113, -3.534346],
    [55.4233, -3.595757],
    [55.44422, -3.651192],
    [55.467274, -3.666315],
    [55.492278, -3.692155],
    [55.50665, -3.712291],
    [55.548293, -3.801855],
    [55.586698, -3.816799],
    [55.623054, -3.788029],
    [55.639461, -3.748085],
    [55.659794, -3.727506],
    [55.690202, -3.710108],
    [55.70742, -3.684262],
    [55.73275, -3.657789],
    [55.763174, -3.603799],
    [55.79394, -3.589112],
    [55.84383, -3.546784],
    [55.865221, -3.533697],
    [55.875593, -3.527311],
    [55.886368, -3.526037],
    [55.893513, -3.528893],
    [55.901697, -3.511073],
    [55.917143, -3.503571],
    [55.927572, -3.493046],
    [55.940898, -3.462094],
    [55.959303, -3.425984],
    [55.978065, -3.396867],
    [55.990782, -3.398624],
    [56.023612, -3.404349],
    [56.039389, -3.39402],
    [56.052594, -3.412598],
    [56.071446, -3.417209],
    [56.082398, -3.42529],
    [56.10624, -3.453935],
    [56.125555, -3.438136],
    [56.151849, -3.454172],
    [56.168359, -3.446973],
    [56.197201, -3.423103],
    [56.211094, -3.425404],
    [56.231236, -3.407769],
    [56.273827, -3.401136],
    [56.300791, -3.390091],
    [56.329768, -3.381891],
    [56.353274, -3.405918],
    [56.375544, -3.429055],
    [56.399825, -3.427612],
    [56.422202, -3.468824],
    [56.448447, -3.469967],
    [56.474161, -3.490057],
    [56.502078, -3.517142],
    [56.52027, -3.540033],
    [56.545039, -3.558434],
    [56.560322, -3.580031],
    [56.571477, -3.598311],
    [56.592546, -3.621082],
    [56.623861, -3.634808],
    [56.649533, -3.669635],
    [56.663309, -3.681592],
    [56.683311, -3.71347],
    [56.698303, -3.732832],
    [56.704351, -3.740385],
    [56.721334, -3.769642],
    [56.745266, -3.779993],
    [56.767541, -3.841342],
    [56.77047, -3.928701],
    [56.771254, -3.974075],
    [56.793462, -4.015917],
    [56.807343, -4.098793],
    [56.817725, -4.1456],
    [56.824907, -4.203189],
    [56.850405, -4.244764],
    [56.88475, -4.252031],
    [56.916748, -4.236603],
    [56.943415, -4.237413],
    [56.986613, -4.183056],
    [57.022934, -4.159711],
    [57.053001, -4.130677],
    [57.06934, -4.10573],
    [57.077482, -4.064444],
    [57.071661, -4.038449],
    [57.075447, -3.997113],
    [57.090525, -3.961636],
    [57.10812, -3.930415],
    [57.115236, -3.897886],
    [57.140618, -3.86992],
    [57.162365, -3.83778],
    [57.180383, -3.824867],
    [57.191806, -3.828913],
    [57.214833, -3.818973],
    [57.255702, -3.8064],
    [57.282803, -3.814825],
    [57.293998, -3.869105],
    [57.303981, -3.930525],
    [57.328386, -3.989116],
    [57.347651, -4.006646],
    [57.366709, -4.022446],
    [57.394504, -4.073734],
    [57.419321, -4.098421],
    [57.418212, -4.133957],
    [57.463486, -4.171139],
    [57.472025, -4.190503],
    [57.476243, -4.217514],
    [57.482836, -4.232241],
    [57.494981, -4.223842],
    [57.508575, -4.265664],
    [57.523953, -4.314401],
    [57.53827, -4.361777],
    [57.562655, -4.418942],
    [57.588337, -4.42577],
    [57.604278, -4.430599],
    [57.62969, -4.38241],
    [57.661419, -4.338267],
    [57.674568, -4.316618],
    [57.6837, -4.294843],
    [57.70187, -4.258669],
    [57.724098, -4.285375],
    [57.761967, -4.264383],
    [57.782665, -4.245522],
    [57.837678, -4.269943],
    [57.85382, -4.304689],
    [57.876165, -4.357548],
    [57.890112, -4.384591],
    [57.916237, -4.4017],
    [57.941285, -4.406954],
    [57.960252, -4.407805],
    [57.990701, -4.411159],
    [58.024545, -4.401835],
    [58.058607, -4.417936],
    [58.117159, -4.442829],
    [58.174833, -4.512237],
    [58.209388, -4.498467],
    [58.246418, -4.474674],
    [58.275921, -4.434948],
    [58.288415, -4.442019],
    [58.331841, -4.435635],
    [58.363016, -4.39699],
    [58.392356, -4.367847],
    [58.419866, -4.37297],
    [58.448448, -4.387596],
    [58.492677, -4.410734],
    [58.500467, -4.368906],
    [58.50024, -4.325227],
    [58.486647, -4.259645],
    [58.491625, -4.214118],
    [58.520162, -4.223176],
    [58.529985, -4.189071],
    [58.531743, -4.144968],
    [58.540708, -4.10927],
    [58.544697, -4.080069],
    [58.561383, -4.016104],
    [58.561712, -3.960139],
    [58.548215, -3.91036],
    [58.554668, -3.867661],
    [58.556691, -3.795023],
    [58.560294, -3.74106],
    [58.553961, -3.625944],
    [58.580546, -3.540267],
    [58.5925, -3.511198],
    [58.574748, -3.446683],
    [58.592316, -3.389143],
    [58.589508, -3.350141],
    [58.629996, -3.157725],
    [58.641291, -3.078168],
  ];
  const polyline = L.polyline(routeCoordinates, { color: 'blue' }).addTo(map);
  map.fitBounds(polyline.getBounds());

  const marker = L.marker(routeCoordinates[0]).addTo(map);
  let i = 0;
  const stopMarkers = [
    { label: 'Lands End', coord: [50.066276, -5.714928] },
    { label: 'Bodmin', coord: [50.5568, -4.690135] },
    { label: 'Coleford', coord: [50.940276, -3.364768] },
    { label: 'Bristol', coord: [51.432586, -2.749924] },
    { label: 'Ludlow', coord: [52.061906, -2.711933] },
    { label: 'St Helens', coord: [53.046035, -2.697682] },
    { label: 'Kendal', coord: [53.707341, -2.656168] },
    { label: 'Lockerbie', coord: [54.365092, -2.782022] },
    { label: 'South Queensferry', coord: [55.121814, -3.355403] },
    { label: 'Pitlochry', coord: [56.168359, -3.446973] },
    { label: 'Inverness', coord: [57.077482, -4.064444] },
    { label: 'Altnaharra', coord: [57.876165, -4.357548] },
    { label: 'John O’Groats', coord: [58.641291, -3.078168] },
  ];
  const placedStops = new Set();
  setTimeout(() => {
    map.flyTo(routeCoordinates[0], 10, { animate: true, duration: 2 });
    setTimeout(animateMarker, 1000);
  }, 300);

function animateMarker() {
  if (i < routeCoordinates.length) {
    const point = routeCoordinates[i];
    marker.setLatLng(point);
    map.panTo(point, { animate: true, duration: 0.25 });
    stopMarkers.forEach(stop => {
      if (!placedStops.has(stop.label) &&
          Math.abs(stop.coord[0] - point[0]) < 0.0005 &&
          Math.abs(stop.coord[1] - point[1]) < 0.0005) {
        L.marker(stop.coord).addTo(map)
          .bindPopup(stop.label).openPopup();
        placedStops.add(stop.label);
      }
    });
    i++;
    setTimeout(animateMarker, 50);
  } else {
    const bounds = L.latLngBounds(routeCoordinates);
    map.flyToBounds(bounds, {
      padding: [50, 50],
      animate: true,
      duration: 3
    });
  }
}
</script>
</body>
</html>
